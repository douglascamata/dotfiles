# Topping E30 DAC Configuration
monitor.alsa.rules = [
  {
    matches = [
      {
        device.name = "~alsa_card.usb-Topping_E30-*"
      }
    ]
    actions = {
      update-props = {
        api.alsa.use-acp = true
        api.alsa.soft-mixer = true
        device.description = "Topping E30 DAC"
        device.nick = "E30"
      }
    }
  }
  {
    matches = [
      {
        node.name = "~alsa_output.usb-Topping_E30-*"
      }
    ]
    actions = {
      update-props = {
        # Audio format optimization
        audio.format = "S32LE"
        audio.rate = 192000
        audio.channels = 2
        audio.position = "FL,FR"

        # Bit perfect quality
        resample.quality = 10
        channelmix.normalize = false
        channelmix.mix-lfe = false
        api.alsa.ignore-dB = false

        # Prevent device suspension
        session.suspend-timeout-seconds = 0
        node.pause-on-idle = false

        # Set priority (higher = preferred device)
        priority.driver = 1200
        priority.session = 1200
      }
    }
  }
]
